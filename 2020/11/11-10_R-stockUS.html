<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-c3f1959a-8388-4a6d-a4e7-bc07ee5b85ba"></attachment><pre class="ql-syntax" spellcheck="false"># 玩美股
install.packages("quantmod")
library(quantmod)
getSymbols("AAPL")
chartSeries(AAPL)
chartSeries(AAPL["2016-01::2020-11"],theme = "white")

均線20 &lt;- runMean(AAPL[ ,4],n = 20)
均線60 &lt;- runMean(AAPL[ ,4],n = 60)
addTA(均線20 ,on=1 ,col="blue")
addTA(均線60 ,on=1 ,col="red")

#8
position &lt;- Lag(ifelse(均線20&gt;均線60,1,0))

return &lt;- ROC(Cl(AAPL))*position

return &lt;- return['2017-03-30/2020-11-09']

return &lt;- exp(cumsum(return))


plot(return)



</pre><p><br></p>